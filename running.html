

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Running &mdash; pyro 2.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="pyro 2.1 documentation" href="index.html"/>
        <link rel="next" title="Working with output" href="output.html"/>
        <link rel="prev" title="Design ideas" href="design.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> pyro
          

          
          </a>

          
            
            
              <div class="version">
                2.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">pyro basics</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction to pyro</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Setting up pyro</a></li>
<li class="toctree-l1"><a class="reference internal" href="notes.html">Notes on the numerical methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="design.html">Design ideas</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Running</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#runtime-options">Runtime options</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="output.html">Working with output</a></li>
<li class="toctree-l1"><a class="reference internal" href="problems.html">Adding a problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="mesh_basics.html">Mesh overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="mesh-examples.html">Mesh examples</a></li>
</ul>
<p class="caption"><span class="caption-text">Solvers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="advection_basics.html">Advection solvers</a></li>
<li class="toctree-l1"><a class="reference internal" href="compressible_basics.html">Compressible hydrodynamics solvers</a></li>
<li class="toctree-l1"><a class="reference internal" href="compressible_compare.html">Compressible solver comparisons</a></li>
<li class="toctree-l1"><a class="reference internal" href="multigrid_basics.html">Multigrid solvers</a></li>
<li class="toctree-l1"><a class="reference internal" href="multigrid-examples.html">Multigrid examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="diffusion_basics.html">Diffusion</a></li>
<li class="toctree-l1"><a class="reference internal" href="incompressible_basics.html">Incompressible hydrodynamics solver</a></li>
<li class="toctree-l1"><a class="reference internal" href="lowmach_basics.html">Low Mach number hydrodynamics solver</a></li>
<li class="toctree-l1"><a class="reference internal" href="swe_basics.html">Shallow water solvers</a></li>
</ul>
<p class="caption"><span class="caption-text">Utilities</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="analysis.html">Analysis routines</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Testing</a></li>
</ul>
<p class="caption"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="help.html">Getting help</a></li>
<li class="toctree-l1"><a class="reference internal" href="ack.html">Acknowledgments</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules.html">API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pyro</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Running</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/running.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

/* nice headers on first paragraph of info/warning boxes */
.admonition .first {
    margin: -12px;
    padding: 6px 12px;
    margin-bottom: 12px;
    color: #fff;
    line-height: 1;
    display: block;
}
.admonition.warning .first {
    background: #f0b37e;
}
.admonition.note .first {
    background: #6ab0de;
}
.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="running">
<h1>Running<a class="headerlink" href="#running" title="Permalink to this headline">¶</a></h1>
<p>All the solvers are run through the <code class="docutils literal"><span class="pre">pyro.py</span></code> script. This takes 3
arguments: the solver name, the problem setup to run with that solver
(this is defined in the solver’s <code class="docutils literal"><span class="pre">problems/</span></code> sub-directory), and the
inputs file (again, usually from the solver’s <code class="docutils literal"><span class="pre">problems/</span></code>
directory).</p>
<p>For example, to run the Sedov problem with the compressible solver we would do:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>./pyro.py compressible sedov inputs.sedov
</pre></div>
</div>
<p>This knows to look for <code class="docutils literal"><span class="pre">inputs.sedov</span></code> in <code class="docutils literal"><span class="pre">compressible/problems/</span></code>
(alternately, you can specify the full path for the inputs file).</p>
<p>To run the smooth Gaussian advection problem with the advection solver, we would do:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>./pyro.py advection smooth inputs.smooth
</pre></div>
</div>
<p>Any runtime parameter can also be specified on the command line, after
the inputs file. For example, to disable runtime visualization for the
above run, we could do:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>./pyro.py advection smooth inputs.smooth vis.dovis=0
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Quite often, the slowest part of the runtime is the visualization, so disabling
vis as shown above can dramatically speed up the execution.  You can always
plot the results after the fact using the <code class="docutils literal"><span class="pre">plot.py</span></code> script, as discussed
in  <a class="reference internal" href="analysis.html#analysis"><span class="std std-ref">Analysis routines</span></a>.</p>
</div>
<div class="section" id="runtime-options">
<h2>Runtime options<a class="headerlink" href="#runtime-options" title="Permalink to this headline">¶</a></h2>
<p>The behavior of the main driver, the solver, and the problem setup can
be controlled by runtime parameters specified in the inputs file (or
via the command line). Runtime parameters are grouped into sections,
with the heading of that section enclosed in <code class="docutils literal"><span class="pre">[</span> <span class="pre">..</span> <span class="pre">]</span></code>. The list of
parameters are stored in three places:</p>
<ul class="simple">
<li>the <code class="docutils literal"><span class="pre">pyro/_defaults</span></code> file</li>
<li>the solver’s <code class="docutils literal"><span class="pre">_defaults</span></code> file</li>
<li>problem’s <code class="docutils literal"><span class="pre">_defaults</span></code> file (named <code class="docutils literal"><span class="pre">_problem-name.defaults</span></code> in the
solver’s <code class="docutils literal"><span class="pre">problem/</span></code> sub-directory).</li>
</ul>
<p>These three files are parsed at runtime to define the list of valid
parameters. The inputs file is read next and used to override the
default value of any of these previously defined
parameters. Additionally, any parameter can be specified at the end of
the commandline, and these will be used to override the defaults. The
collection of runtime parameters is stored in a
<a class="reference internal" href="util.html#util.runparams.RuntimeParameters" title="util.runparams.RuntimeParameters"><code class="xref py py-func docutils literal"><span class="pre">RuntimeParameters</span></code></a> object.</p>
<p>The <code class="docutils literal"><span class="pre">runparams.py</span></code> module in <code class="docutils literal"><span class="pre">util/</span></code> controls access to the runtime
parameters. You can setup the runtime parameters, parse an inputs
file, and access the value of a parameter (<code class="docutils literal"><span class="pre">hydro.cfl</span></code> in this example)
as:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">rp</span> <span class="o">=</span> <span class="n">RuntimeParameters</span><span class="p">()</span>
<span class="n">rp</span><span class="o">.</span><span class="n">load_params</span><span class="p">(</span><span class="s2">&quot;inputs.test&quot;</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">cfl</span> <span class="o">=</span> <span class="n">rp</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s2">&quot;hydro.cfl&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>When pyro is run, the file <code class="docutils literal"><span class="pre">inputs.auto</span></code> is output containing the
full list of runtime parameters, their value for the simulation, and
the comment that was associated with them from the <code class="docutils literal"><span class="pre">_defaults</span></code>
files. This is a useful way to see what parameters are in play for a
given simulation.</p>
<p>All solvers use the following parameters:</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2"><code class="docutils literal"><span class="pre">[driver]</span></code></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">max_steps</span></code></td>
<td>the maximum number of steps in the simulation</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">tmax</span></code></td>
<td>the simulation time to evolve to</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">init_tstep_factor</span></code></td>
<td>the amount by which to shrink the first timestep. This lets the code ramp up to the CFL timestep slowly</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">max_dt_change</span></code></td>
<td>the maximum factor by which the timestep can increase from one step to the next</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2"><code class="docutils literal"><span class="pre">[io]</span></code></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">basename</span></code></td>
<td>the descriptive prefix to use for output files</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">dt_out</span></code></td>
<td>the interval in simulation time between writing output files</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">n_out</span></code></td>
<td>the number of timesteps between writing output files</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2"><code class="docutils literal"><span class="pre">[vis]</span></code></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">dovis</span></code></td>
<td>enable (1) or disable (0) runtime visualization</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">store_images</span></code></td>
<td>if 1, write out PNG files as we do the runtime visualization</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">n_out</span></code></td>
<td>the number of timesteps between writing output files</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2"><code class="docutils literal"><span class="pre">[mesh]</span></code></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">xmin</span></code></td>
<td>the physical coordinate of the lower x face of the domain</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">xmax</span></code></td>
<td>the physical coordinate of the upper x face of the domain</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">ymin</span></code></td>
<td>the physical coordinate of the lower y face of the domain</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">ymax</span></code></td>
<td>the physical coordinate of the upper y face of the domain</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">xlboundary</span></code></td>
<td>the physical description for the type of boundary at the lower x face of the domain</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">xrboundary</span></code></td>
<td>the physical description for the type of boundary at the upper x face of the domain</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">ylboundary</span></code></td>
<td>the physical description for the type of boundary at the lower y face of the domain</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">yrboundary</span></code></td>
<td>the physical description for the type of boundary at the upper y face of the domain</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">nx</span></code></td>
<td>the number zones in the x-direction</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">ny</span></code></td>
<td>the number zones in the y-direction</td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="output.html" class="btn btn-neutral float-right" title="Working with output" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="design.html" class="btn btn-neutral" title="Design ideas" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Michael Zingale.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>